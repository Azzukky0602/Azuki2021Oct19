{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "57a5860f-73b7-459a-9058-0bfd8d84477a",
   "metadata": {},
   "outputs": [],
   "source": [
    "import streamlit as st\n",
    "import requests   #3歳補正導入済み\n",
    "import re\n",
    "from bs4 import BeautifulSoup\n",
    "import time\n",
    "import pandas as pd\n",
    "from datetime import datetime as dt\n",
    "from datetime import timedelta as td\n",
    "from pytz import timezone\n",
    "import copy\n",
    "import numpy as np\n",
    "\n",
    "\n",
    "st.title('テキトー指数研究所＠WEB')\n",
    "st.header('南関東')\n",
    "st.subheader('新パラメータ版')\n",
    "\n",
    "st.write('   ')\n",
    "st.info('【JRA版】\\https://azzukky-jra.streamlit.app/')\n",
    "st.info('【地方交流版】\\https://azzukky-k24.streamlit.app/')\n",
    "\n",
    "st.write('   ')\n",
    "st.write('   ')\n",
    "st.write('●クラスが上がるほど、良く当たる傾向があります。')\n",
    "st.write('●３歳戦はあまりあてになりません。')\n",
    "st.write('●過去３走していない馬の指数はゼロになります。')\n",
    "st.write('●中央からの転入馬の指数は大きくなりますので、指数よりも状態と騎手を重視してください。')\n",
    "st.write('●私も原因がつかめないエラーが出るときもあります。')\n",
    "st.write('   ')\n",
    "st.write('   ')\n",
    "\n",
    "\n",
    "\n",
    "utc_time = dt.now(timezone('Asia/Tokyo'))\n",
    "jst_date_today = utc_time.strftime('%Y%m%d')\n",
    "jst_time_tomorrow = utc_time + td(days = 1)\n",
    "jst_date_tomorrow = jst_time_tomorrow.strftime('%Y%m%d')\n",
    "kotoshi = utc_time.year\n",
    "\n",
    "yosoubi = st.radio('いつのレース？', ['今日', '明日', '日付入力'])\n",
    "\n",
    "if yosoubi == '今日':\n",
    "    nengappi = jst_date_today\n",
    "elif yosoubi == '明日':\n",
    "    nengappi = jst_date_tomorrow\n",
    "elif yosoubi == '日付入力':\n",
    "    nengappi = str(kotoshi) + st.text_input('レースの日付を入力：例0628')\n",
    "\n",
    "basho = st.radio('開催場所？', ['大井', '船橋', '川崎', '浦和'])\n",
    "\n",
    "if basho == '大井':\n",
    "    place = \"2015\"\n",
    "elif basho == '船橋':\n",
    "    place = \"1914\"\n",
    "elif basho == '川崎':\n",
    "    place = \"2135\"\n",
    "elif basho == '浦和':\n",
    "    place = \"1813\"\n",
    "else:\n",
    "    place = \"0\"    \n",
    "\n",
    "race = st.number_input('【半角数字】レース番号？', 1, 12, 11)\n",
    "\n",
    "race_for_keisan = nengappi + place + '00' + '00' + str(str(race).zfill(2))\n",
    "\n",
    "\n",
    "st.write('   ')\n",
    "st.subheader('計算するときはチェックボックスをチェック！')\n",
    "st.subheader('次のレースを計算する前にチェックを外す！')\n",
    "\n",
    "push = st.checkbox('チェック！！')\n",
    "\n",
    "if push == True:\n",
    "    \n",
    "    st.write('計算には約1分かかります。しばらくお待ちください。')\n",
    "    \n",
    "    url = 'https://keiba.rakuten.co.jp/race_card/list/RACEID/' + race_for_keisan\n",
    "\n",
    "    html = requests.get(url)\n",
    "    html.encoding = 'UTF-8'\n",
    "    soup = BeautifulSoup(html.text, \"html.parser\")\n",
    "    syusso_uma = soup.find('table').find_all('a', attrs = {'href': re.compile('^https://keiba.rakuten.co.jp/horse_detail/')})\n",
    "    profile = soup.find_all('td', attrs = 'profile')\n",
    "    syusso_jockey = soup.find('table').find_all('a', attrs = {'href': re.compile('^https://keiba.rakuten.co.jp/jockey/')})\n",
    "    odds = soup.find('table').find_all('span', attrs = {'rate'})\n",
    "    \n",
    "    if bool(syusso_uma) == False:\n",
    "        print('該当レースはありません')\n",
    "\n",
    "    else:        \n",
    "        rd = re.findall(r'\\d+', url)[0][:8]\n",
    "        racedate = dt.strptime(rd, '%Y%m%d')\n",
    "        racename = soup.find('h2').text.replace('\\u3000', ' ')\n",
    "        racenumber = soup.find('h1').text[:-4]        \n",
    "        course_distance = soup.select('#raceInfomation > div > div.raceNote > ul.trackState.trackMainState > li.distance')[0].text.strip()\n",
    "\n",
    "        if ',' in course_distance:\n",
    "            course_distance = course_distance.replace(',' , '')\n",
    "        else:\n",
    "            coursedistance = course_distance\n",
    "        race_course = course_distance[0]\n",
    "        race_distance = int(re.findall(r'\\d+', course_distance)[0])\n",
    "\n",
    "        horse_id_list = []\n",
    "        horse_name_list = []\n",
    "        for uma in syusso_uma:\n",
    "            horse_id = re.findall(r'\\d+', uma['href'])[0]\n",
    "            horse_id_list.append(horse_id)\n",
    "            horse_name = uma.text\n",
    "            horse_name_list.append(horse_name)\n",
    "\n",
    "        weight_list = []\n",
    "        gender_list = []\n",
    "        age_list = []\n",
    "        trainer_list = []\n",
    "        for uma2 in profile:\n",
    "            uma2_text = uma2.text\n",
    "            weight = re.findall(r'\\S\\S+', uma2_text)[2]\n",
    "            weight_list.append(weight)\n",
    "            sei = re.findall(r'\\S\\S+', uma2_text)[0][0]\n",
    "            gender_list.append(sei)\n",
    "            rei = re.findall(r'\\S\\S+', uma2_text)[0][1:]\n",
    "            age_list.append(rei)        \n",
    "            trainerX = re.findall(r'\\D\\D+', uma2_text)[4]\n",
    "            trainer = ''.join(trainerX.split())[2:]\n",
    "            trainer_list.append(trainer)\n",
    "            \n",
    "            \n",
    "        syusso_list = [x1 + ' ' + x2 +  ' ' + x3 + ' ' + x4 for (x1, x2, x3, x4) in zip(horse_id_list, weight_list, gender_list, age_list)]\n",
    "\n",
    "        jockey_list = []\n",
    "        for uma3 in syusso_jockey:\n",
    "            jockey = uma3.text\n",
    "            jockey_list.append(jockey)\n",
    "\n",
    "        umaban = []\n",
    "        for i in range(len(horse_id_list)):\n",
    "            umaban.append(i+1)\n",
    "\n",
    "        odds_list = []        \n",
    "        for od in odds:\n",
    "            od_text = od.text\n",
    "            horse_odd = re.findall(r'\\d+.\\d', od_text)\n",
    "            if len(horse_odd) ==0:\n",
    "                odds_list.append('---')\n",
    "            else:\n",
    "                odds_list.append(horse_odd[0])              \n",
    "\n",
    "            \n",
    "    horse_results = {}                                  \n",
    "    for horse_id in syusso_list:\n",
    "        time.sleep(1)\n",
    "        url2 = 'https://keiba.rakuten.co.jp/horse_detail/detail/HORSEID/' + horse_id[:10].rstrip()    \n",
    "        horse_results[horse_id] = pd.read_html(url2)[1].head(10)\n",
    "\n",
    "    past_results = copy.deepcopy(horse_results)   #個々から下のコードに影響されないhorse_resultsのコピーを作る。\n",
    "\n",
    "    processed_horse_results = {}\n",
    "    for horse_id, df in past_results.items():\n",
    "\n",
    "        df = df.drop(df.index[df['タイム'] == '-'])\n",
    "        df['日付2'] = [dt.strptime(i, \"%Y/%m/%d\") for i in df['日付']]\n",
    "        df['レース名2'] = df['レース名'].str.strip('[過去映像]')\n",
    "        df['コース'] = df['距離'].map(lambda x:str(x)[0])\n",
    "        df['距離2'] = df['距離'].map(lambda x:str(x)[1:]).astype(int)\n",
    "        df['着順2'] = df['着順'].str.split('/', expand = True)[0].astype(int)\n",
    "        df['差2'] = df['差'].astype(float)\n",
    "\n",
    "        df.drop(['馬番', '人気', '上3F', 'R', '負担重量', '調教師', 'レース名', '距離', '着順', '日付', '差', '騎手'], axis = 1, inplace = True)\n",
    "\n",
    "        df = df.loc[:, ['日付2', '競馬場', 'レース名2', 'コース', '距離2', '着順2', '差2', 'タイム']].dropna()\n",
    "        df = df[(df['差2'] < 4.0)]\n",
    "        df = df[(df['競馬場'] != '外国')]\n",
    "        df.reset_index(inplace=True, drop=True)\n",
    "\n",
    "        processed_horse_results[horse_id] = df\n",
    "\n",
    "    horse_syokin_list = []\n",
    "    for horse_id in horse_id_list:\n",
    "        url_umasyokin = 'https://keiba.rakuten.co.jp/horse_detail/detail/HORSEID/' + horse_id\n",
    "        all_money = pd.read_html(url_umasyokin)[2].head(3)\n",
    "        if all_money.iloc[2]['獲得賞金(円)'] <= 5000000:\n",
    "            nar_money = float((all_money.iloc[1]['獲得賞金(円)'] + all_money.iloc[2]['獲得賞金(円)']) / 10000)\n",
    "            horse_syokin_list.append(nar_money)\n",
    "        else:\n",
    "            nar_money = float((all_money.iloc[1]['獲得賞金(円)'] + all_money.iloc[2]['獲得賞金(円)'] * 0.6 + 2000000) / 10000)\n",
    "            horse_syokin_list.append(nar_money)\n",
    "\n",
    "    syokin = soup.select_one('#raceInfomation > div > div.raceNote > dl').text.split()\n",
    "    del syokin[0]\n",
    "\n",
    "    race_syokin = [int(re.search(r'[\\d,]+(?=円)', item).group().replace(',', '')) // 10000 for item in syokin]\n",
    "\n",
    "    zenso_list = []\n",
    "    for horse_id, df in past_results.items():\n",
    "        zenso = past_results[horse_id]['競馬場'][0]\n",
    "        if 'Ｊ' in zenso:\n",
    "            zenso_list.append('JRA')\n",
    "        else:\n",
    "            zenso_list.append(zenso)        \n",
    "\n",
    "        \n",
    "    def shisu(processed_horse_results):\n",
    "        jra = ['札幌', '函館', '福島', '新潟', '東京', '中山', '中京', '京都', '阪神', '小倉']\n",
    "        nankan = ['浦和', '船橋', '大井', '川崎']\n",
    "        hyogo = ['園田', '姫路']\n",
    "        tokai = ['名古屋', '笠松']\n",
    "        others = ['水沢' '盛岡', '金沢', '高知', '佐賀']\n",
    "\n",
    "        GI = ['チャン', 'フェブ']\n",
    "        GII = ['東海Ｓ']\n",
    "        GIII = ['根岸Ｓ', 'マーチ', 'アンタ', '平安Ｓ', 'プロキ', 'ユニコ', 'レパー', 'エルム', 'シリウ', 'みやこ', '武蔵野', 'カペラ']   \n",
    "\n",
    "        tekito_shisu = {}\n",
    "        for horse_id, p_df in processed_horse_results.items():  #p_dfはprocessed dafa frame\n",
    "            if len(p_df) < 3:\n",
    "                tekito_shisu[horse_id] = 0\n",
    "\n",
    "            elif len(p_df) == 3:\n",
    "\n",
    "                base_number = []\n",
    "                for t in range(3):\n",
    "\n",
    "                    if 'Ｊ' in p_df.iloc[t]['競馬場'] and 'オープン' in p_df.iloc[t]['レース名2']:  \n",
    "                        kijun = 600\n",
    "                    elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '３勝' in p_df.iloc[t]['レース名2']:  \n",
    "                        kijun = 500\n",
    "                    elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '２勝' in p_df.iloc[t]['レース名2']:\n",
    "                        kijun = 400\n",
    "                    elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '１勝' in p_df.iloc[t]['レース名2']:  \n",
    "                        kijun = 300\n",
    "                    elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '未勝利' in p_df.iloc[t]['レース名2']:\n",
    "                        kijun = 200\n",
    "                    elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '新馬' in p_df.iloc[t]['レース名2']:\n",
    "                        kijun = 200    \n",
    "\n",
    "                    elif 'Ｊｐｎ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 500\n",
    "                    elif 'Ｊｐｎ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 700                        \n",
    "                    elif  'Ｊｐｎ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 450\n",
    "                    elif  'Ｊｐｎ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 600                        \n",
    "                    elif  'Ｊｐｎ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 415\n",
    "                    elif  'Ｊｐｎ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 500                        \n",
    "\n",
    "\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 350\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 500                        \n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 320\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 450                         \n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                        kijun = 300\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                        kijun = 400                         \n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and ('オープン' in p_df.iloc[t]['レース名2'])\\\n",
    "                      and ('Ｓ' and 'Ａ' and 'Ｂ' and 'Ｃ' not in p_df.iloc[t]['レース名2']) and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30): \n",
    "                        kijun = 240\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and ('オープン' in p_df.iloc[t]['レース名2'])\\\n",
    "                      and ('Ｓ' and 'Ａ' and 'Ｂ' and 'Ｃ' not in p_df.iloc[t]['レース名2']) and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1): \n",
    "                        kijun = 350\n",
    "\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and 'Ａ１' in p_df.iloc[t]['レース名2']:  \n",
    "                        kijun = 320\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' not in p_df.iloc[t]['レース名2'])): #A2\n",
    "                        kijun = 300\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' in p_df.iloc[t]['レース名2'])): #A2B1\n",
    "                        kijun = 270\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ａ２' and 'Ｂ２' not in p_df.iloc[t]['レース名2'])): #B1\n",
    "                        kijun = 240  \n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ｂ２' in p_df.iloc[t]['レース名2'])): #B1B2\n",
    "                        kijun = 230        \n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' and 'Ｂ３' not in p_df.iloc[t]['レース名2'])): #B2  \n",
    "                        kijun = 220\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ３' in p_df.iloc[t]['レース名2'])):  #B2B3\n",
    "                        kijun = 210\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｂ２' and 'Ｃ１' not in p_df.iloc[t]['レース名2'])): #B3\n",
    "                        kijun = 200\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｃ１' in p_df.iloc[t]['レース名2'])): #B3C1\n",
    "                        kijun = 180\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｂ３' and 'Ｃ２' not in p_df.iloc[t]['レース名2'])): #C1\n",
    "                        kijun = 160\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｃ２' in p_df.iloc[t]['レース名2'])): #C1C2\n",
    "                        kijun = 150\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ１' and 'Ｃ３' not in p_df.iloc[t]['レース名2'])): #C2\n",
    "                        kijun = 140\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ３' in p_df.iloc[t]['レース名2'])): #C2C3\n",
    "                        kijun = 130\n",
    "                    elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ３' in p_df.iloc[t]['レース名2']) and ('Ｃ２' not in p_df.iloc[t]['レース名2'])): #C3  \n",
    "                        kijun = 120\n",
    "                    else:\n",
    "                        kijun = 60\n",
    "\n",
    "                    base_number.append(kijun)\n",
    "\n",
    "                kijun1, kijun2, kijun3 = base_number[0], base_number[1], base_number[2]\n",
    "\n",
    "    #着差は楽天競馬とnetkeibaで書き方が違う。地方版は楽天競馬に対応            \n",
    "                chakusa = []\n",
    "                for u in range(3):\n",
    "\n",
    "                    if p_df.iloc[u]['着順2'] == 1:\n",
    "                        if p_df.iloc[u]['差2'] > 0.7:\n",
    "                            race_chakusa = 1.5\n",
    "                        elif 0.5 < p_df.iloc[u]['差2'] <= 0.7:\n",
    "                            race_chakusa = 1.3\n",
    "                        elif 0.3 < p_df.iloc[u]['差2'] <= 0.5:\n",
    "                            race_chakusa = 1.2    \n",
    "                        else:\n",
    "                            race_chakusa = 1.0\n",
    "                    elif p_df.iloc[u]['着順2'] > 1:\n",
    "                        if 0.0 <= p_df.iloc[u]['差2'] <= 0.5:\n",
    "                            race_chakusa = 1.0\n",
    "                        elif 0.5 < p_df.iloc[u]['差2'] <= 1.0:\n",
    "                            race_chakusa = 0.8\n",
    "                        elif 1.0 < p_df.iloc[u]['差2'] <= 2.0:\n",
    "                            race_chakusa = 0.5\n",
    "                        else:\n",
    "                            race_chakusa = 0.2\n",
    "\n",
    "                    chakusa.append(race_chakusa)\n",
    "\n",
    "                a, b, c = chakusa[0], chakusa[1], chakusa[2]\n",
    "\n",
    "\n",
    "                #連勝係数       \n",
    "                if p_df.iloc[0]['着順2'] == 1 and p_df.iloc[1]['着順2'] == 1 and p_df.iloc[2]['着順2'] == 1:\n",
    "                    rensho = (-p_df.iloc[0]['差2'] -p_df.iloc[1]['差2'] -p_df.iloc[2]['差2']) / 4   #4戦の馬と比較するから\n",
    "                    if rensho < -0.7:\n",
    "                        e = 1.25\n",
    "                    elif -0.7 <= rensho < -0.5:\n",
    "                        e = 1.20    \n",
    "                    elif -0.5 <= rensho < -0.3:\n",
    "                        e = 1.15\n",
    "                    else:\n",
    "                        e = 1.10               \n",
    "                elif p_df.iloc[0]['着順2'] == 1 and p_df.iloc[1]['着順2'] == 1: # and p_df.iloc[2]['着順2'] != 1:\n",
    "                    rensho = (-p_df.iloc[0]['差2'] -p_df.iloc[1]['差2'] +p_df.iloc[2]['差2']) / 4   #4戦の馬と比較するから\n",
    "                    if rensho < -0.7:\n",
    "                        e = 1.20\n",
    "                    elif -0.7 <= rensho < -0.5:\n",
    "                        e = 1.15   \n",
    "                    elif -0.5 <= rensho < -0.3:\n",
    "                        e = 1.10\n",
    "                    else:\n",
    "                        e = 1.05\n",
    "                else:\n",
    "                    e = 1.0\n",
    "\n",
    "                #斤量補正        \n",
    "\n",
    "                #斤量補正\n",
    "                if 800 <= race_distance <= 1000:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.15 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.15 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif 1000 < race_distance <= 1400:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.1166 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.1166 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif 1400 < race_distance <= 1800:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.0833 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.0833 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif race_distance > 1800:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.05 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.05 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "\n",
    "\n",
    "                #休養係数        \n",
    "                #if td(weeks = 12) < (racedate - p_df.iloc[0]['日付2']) <= td(weeks = 24):\n",
    "                    #g = 0.95\n",
    "                #elif td(weeks = 24) < (racedate - p_df.iloc[0]['日付2']) <= td(weeks = 48):\n",
    "                    #g = 0.9\n",
    "                if td(weeks = 8) < (racedate - p_df.iloc[0]['日付2']):\n",
    "                    g = 0.8\n",
    "                else:\n",
    "                    g = 1.0\n",
    "\n",
    "                #レース毎の牝馬補正    \n",
    "                hinba = []\n",
    "                for v in range(3):\n",
    "\n",
    "                    if '牝' in p_df.iloc[v]['レース名2']:\n",
    "                        female = 0.9\n",
    "                    else:\n",
    "                        female = 1.0\n",
    "                    hinba.append(female)\n",
    "\n",
    "                a1, b1, c1 = hinba[0], hinba[1], hinba[2]\n",
    "\n",
    "\n",
    "                #距離係数                \n",
    "                av_dist = (p_df.iloc[0]['距離2'] + p_df.iloc[1]['距離2'] + p_df.iloc[2]['距離2']) / 3 \n",
    "                if 800 <= race_distance <= 1000:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 200 and abs(race_distance - av_dist) > 200:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1000 < race_distance <= 1400:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 250 and abs(race_distance - av_dist) > 250:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1400 < race_distance <= 1800:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 300 and abs(race_distance - av_dist) > 300:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1800 < race_distance:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 400 and av_dist < 1600:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "\n",
    "\n",
    "                #コース係数\n",
    "                if race_course == 'ダ':\n",
    "                    if 'Ｊ' in p_df.iloc[0]['競馬場']:\n",
    "                        if p_df.iloc[0]['コース'] == '芝' and p_df.iloc[1]['コース'] == '芝':\n",
    "                            i = 0.5\n",
    "                        elif p_df.iloc[0]['コース'] == '芝' and p_df.iloc[1]['コース'] == 'ダ':\n",
    "                            i = 0.6\n",
    "                        elif p_df.iloc[0]['コース'] == 'ダ' and p_df.iloc[1]['コース'] == '芝':\n",
    "                            i = 0.7\n",
    "                        elif p_df.iloc[0]['コース'] == 'ダ':\n",
    "                            i = 0.8                       \n",
    "                    else:\n",
    "                        i = 1.0\n",
    "\n",
    "\n",
    "                ts = ((kijun1 *1.5 *a *a1 + kijun2 *b *b1 + kijun3 *c *c1) + f) * e * g * h * i\n",
    "                tekito_shisu[horse_id]= int(ts)\n",
    "\n",
    "\n",
    "\n",
    "            else:\n",
    "                if int(horse_id[-1]) == 3:   #3歳　補正  \n",
    "\n",
    "                    base_number = []\n",
    "                    for t in range(4):\n",
    "\n",
    "                        if 'Ｊ' in p_df.iloc[t]['競馬場'] and 'オープン' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 600\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '３勝' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 500\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '２勝' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 400\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '１勝' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 300\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '未勝利' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 200\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '新馬' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 200    \n",
    "\n",
    "                        elif 'Ｊｐｎ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                            kijun = 500\n",
    "                        elif 'Ｊｐｎ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 700                        \n",
    "                        elif  'Ｊｐｎ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                            kijun = 450\n",
    "                        elif  'Ｊｐｎ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 600                        \n",
    "                        elif  'Ｊｐｎ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                            kijun = 415\n",
    "                        elif  'Ｊｐｎ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 500                        \n",
    "\n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30):  \n",
    "                            kijun = 350\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ１' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 500                        \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] < dt(kotoshi, 6, 30):  \n",
    "                            kijun = 320\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ２' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 450                         \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] < dt(kotoshi, 6, 30):  \n",
    "                            kijun = 300\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ３' in p_df.iloc[t]['レース名2'] and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1):  \n",
    "                            kijun = 400                         \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and ('オープン' in p_df.iloc[t]['レース名2'])\\\n",
    "                          and ('Ｓ' and 'Ａ' and 'Ｂ' and 'Ｃ' not in p_df.iloc[t]['レース名2']) and p_df.iloc[t]['日付2'] <= dt(kotoshi, 6, 30): \n",
    "                            kijun = 240\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and ('オープン' in p_df.iloc[t]['レース名2'])\\\n",
    "                          and ('Ｓ' and 'Ａ' and 'Ｂ' and 'Ｃ' not in p_df.iloc[t]['レース名2']) and p_df.iloc[t]['日付2'] >= dt(kotoshi, 7, 1): \n",
    "                            kijun = 350\n",
    "                            \n",
    "                            \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ａ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 320\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' not in p_df.iloc[t]['レース名2'])): #A2\n",
    "                            kijun = 300\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' in p_df.iloc[t]['レース名2'])): #A2B1\n",
    "                            kijun = 270\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ａ２' and 'Ｂ２' not in p_df.iloc[t]['レース名2'])): #B1\n",
    "                            kijun = 240  \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ｂ２' in p_df.iloc[t]['レース名2'])): #B1B2\n",
    "                            kijun = 230        \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' and 'Ｂ３' not in p_df.iloc[t]['レース名2'])): #B2  \n",
    "                            kijun = 220\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ３' in p_df.iloc[t]['レース名2'])):  #B2B3\n",
    "                            kijun = 210\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｂ２' and 'Ｃ１' not in p_df.iloc[t]['レース名2'])): #B3\n",
    "                            kijun = 200\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｃ１' in p_df.iloc[t]['レース名2'])): #B3C1\n",
    "                            kijun = 180\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｂ３' and 'Ｃ２' not in p_df.iloc[t]['レース名2'])): #C1\n",
    "                            kijun = 160\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｃ２' in p_df.iloc[t]['レース名2'])): #C1C2\n",
    "                            kijun = 150\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ１' and 'Ｃ３' not in p_df.iloc[t]['レース名2'])): #C2\n",
    "                            kijun = 140\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ３' in p_df.iloc[t]['レース名2'])): #C2C3\n",
    "                            kijun = 130\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ３' in p_df.iloc[t]['レース名2']) and ('Ｃ２' not in p_df.iloc[t]['レース名2'])): #C3  \n",
    "                            kijun = 120\n",
    "                        else:\n",
    "                            kijun = 60\n",
    "\n",
    "                        base_number.append(kijun)\n",
    "\n",
    "                    kijun1, kijun2, kijun3, kijun4 = base_number[0], base_number[1], base_number[2], base_number[3]\n",
    "\n",
    "    #古馬の指数\n",
    "                else:\n",
    "\n",
    "                    base_number = []\n",
    "                    for t in range(4):\n",
    "\n",
    "                        if 'Ｊ' in p_df.iloc[t]['競馬場'] and p_df.iloc[t]['レース名2'][:3] in GI:  \n",
    "                            kijun = 800                  \n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and p_df.iloc[t]['レース名2'][:3] in GII:  \n",
    "                            kijun = 700    \n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and p_df.iloc[t]['レース名2'][:3] in GIII:  \n",
    "                            kijun = 650\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and 'オープン' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 600\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '３勝' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 500\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '２勝' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 400\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '１勝' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 300\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '未勝利' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 200\n",
    "                        elif 'Ｊ' in p_df.iloc[t]['競馬場'] and '新馬' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 200    \n",
    "\n",
    "\n",
    "                        elif '帝王賞' and 'Ｊｐｎ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 800\n",
    "                        elif '東京大賞典' and 'Ｊｐｎ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 800\n",
    "                        elif 'Ｊｐｎ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 700\n",
    "                        elif  'Ｊｐｎ２' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 600\n",
    "                        elif  'Ｊｐｎ３' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 500\n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 500\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ２' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 450\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ｓ３' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 400\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and ('オープン' in p_df.iloc[t]['レース名2'])\\\n",
    "                          and ('Ｓ' and 'Ａ' and 'Ｂ' and 'Ｃ' not in p_df.iloc[t]['レース名2']): \n",
    "                            kijun = 350 \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and 'Ａ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 320\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' not in p_df.iloc[t]['レース名2'])): #A2\n",
    "                            kijun = 300\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' in p_df.iloc[t]['レース名2'])): #A2B1\n",
    "                            kijun = 270\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ａ２' and 'Ｂ２' not in p_df.iloc[t]['レース名2'])): #B1\n",
    "                            kijun = 240  \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ｂ２' in p_df.iloc[t]['レース名2'])): #B1B2\n",
    "                            kijun = 230        \n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ１' and 'Ｂ３' not in p_df.iloc[t]['レース名2'])): #B2  \n",
    "                            kijun = 220\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ｂ３' in p_df.iloc[t]['レース名2'])):  #B2B3\n",
    "                            kijun = 210\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｂ２' and 'Ｃ１' not in p_df.iloc[t]['レース名2'])): #B3\n",
    "                            kijun = 200\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｂ３' in p_df.iloc[t]['レース名2']) and ('Ｃ１' in p_df.iloc[t]['レース名2'])): #B3C1\n",
    "                            kijun = 180\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｂ３' and 'Ｃ２' not in p_df.iloc[t]['レース名2'])): #C1\n",
    "                            kijun = 160\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｃ２' in p_df.iloc[t]['レース名2'])): #C1C2\n",
    "                            kijun = 150\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ１' and 'Ｃ３' not in p_df.iloc[t]['レース名2'])): #C2\n",
    "                            kijun = 140\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ３' in p_df.iloc[t]['レース名2'])): #C2C3\n",
    "                            kijun = 130\n",
    "                        elif p_df.iloc[t]['競馬場'] in nankan and (('Ｃ３' in p_df.iloc[t]['レース名2']) and ('Ｃ２' not in p_df.iloc[t]['レース名2'])): #C3  \n",
    "                            kijun = 120\n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('ＪＲＡ交流' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 280    \n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('重賞' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 350\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ａ１' in p_df.iloc[t]['レース名2']) and ('Ａ２' not in p_df.iloc[t]['レース名2'])):  \n",
    "                            kijun = 280\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ａ１'and 'Ａ２' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 260\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ａ２' in p_df.iloc[t]['レース名2']) and ('Ａ１' and 'Ｂ１' not in p_df.iloc[t]['レース名2'])):  \n",
    "                            kijun = 240\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ａ２' and 'Ｂ１' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 220\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ｂ１' in p_df.iloc[t]['レース名2']) and ('Ａ２' and 'Ｂ２' not in p_df.iloc[t]['レース名2'])):\n",
    "                            kijun = 200        \n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ｂ１' and 'Ｂ２' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 180\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ｂ２' in p_df.iloc[t]['レース名2']) and ('Ａ１' and 'Ｃ１' not in p_df.iloc[t]['レース名2'])):\n",
    "                            kijun = 160     \n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ｂ２' and 'Ｃ１' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 140\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ｃ１' in p_df.iloc[t]['レース名2']) and ('Ｂ２' and 'Ｃ２' not in p_df.iloc[t]['レース名2'])):  \n",
    "                            kijun = 120\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ｃ１' and 'Ｃ２' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 110\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ｃ２' in p_df.iloc[t]['レース名2']) and ('Ｃ１' and 'Ｃ３' not in p_df.iloc[t]['レース名2'])):  \n",
    "                            kijun = 100\n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and ('Ｃ２' and 'Ｃ３' in p_df.iloc[t]['レース名2']):  \n",
    "                            kijun = 90   \n",
    "                        elif p_df.iloc[t]['競馬場'] in hyogo and (('Ｃ３' in p_df.iloc[t]['レース名2']) and ('Ｃ２' not in p_df.iloc[t]['レース名2'])):  \n",
    "                            kijun = 80\n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'ＳＰ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 320\n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'ＳＰ２' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 280\n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'ＳＰ３' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 240 \n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'Ａ' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 200\n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'Ｂ' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 130  \n",
    "                        elif p_df.iloc[t]['競馬場'] in tokai and 'Ｃ' in p_df.iloc[t]['レース名2']:\n",
    "                            kijun = 60                    \n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] == '門別' and 'Ｈ１' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 330\n",
    "                        elif p_df.iloc[t]['競馬場'] == '門別' and 'Ｈ２' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 300\n",
    "                        elif p_df.iloc[t]['競馬場'] == '門別' and 'Ｈ３' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 270\n",
    "                        elif p_df.iloc[t]['競馬場'] == '門別' and 'Ａ' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 240\n",
    "                        elif p_df.iloc[t]['競馬場'] == '門別' and 'Ａ' not in p_df.iloc[t]['レース名2'] and 'Ｂ' in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 180\n",
    "\n",
    "                        elif p_df.iloc[t]['競馬場'] in others and 'オープン' in p_df.iloc[t]['レース名2'] and 'Ｊｐｎ' not in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 220\n",
    "                        elif p_df.iloc[t]['競馬場'] in others and 'Ａ' in p_df.iloc[t]['レース名2'] and 'Ｂ' not in p_df.iloc[t]['レース名2']:  \n",
    "                            kijun = 200\n",
    "\n",
    "                        else:\n",
    "                            kijun = 60\n",
    "\n",
    "                        base_number.append(kijun)\n",
    "\n",
    "                    kijun1, kijun2, kijun3, kijun4 = base_number[0], base_number[1], base_number[2], base_number[3]\n",
    "\n",
    "\n",
    "                #着差係数\n",
    "\n",
    "                chakusa = []\n",
    "                for u in range(4):\n",
    "\n",
    "                    if p_df.iloc[u]['着順2'] == 1:\n",
    "                        if p_df.iloc[u]['差2'] > 0.7:\n",
    "                            race_chakusa = 1.5\n",
    "                        elif 0.5 < p_df.iloc[u]['差2'] <= 0.7:\n",
    "                            race_chakusa = 1.3\n",
    "                        elif 0.3 < p_df.iloc[u]['差2'] <= 0.5:\n",
    "                            race_chakusa = 1.2    \n",
    "                        else:\n",
    "                            race_chakusa = 1.0\n",
    "                    elif p_df.iloc[u]['着順2'] > 1:\n",
    "                        if 0.0 <= p_df.iloc[u]['差2'] <= 0.5:\n",
    "                            race_chakusa = 1.0\n",
    "                        elif 0.5 < p_df.iloc[u]['差2'] <= 1.0:\n",
    "                            race_chakusa = 0.8\n",
    "                        elif 1.0 < p_df.iloc[u]['差2'] <= 2.0:\n",
    "                            race_chakusa = 0.5\n",
    "                        else:\n",
    "                            race_chakusa = 0.2\n",
    "\n",
    "                    chakusa.append(race_chakusa)\n",
    "\n",
    "                a, b, c, d = chakusa[0], chakusa[1], chakusa[2], chakusa[3]\n",
    "\n",
    "\n",
    "                #連勝係数       \n",
    "                if p_df.iloc[0]['着順2'] == 1 and p_df.iloc[1]['着順2'] == 1 and p_df.iloc[2]['着順2'] == 1 and p_df.iloc[3]['着順2'] == 1:\n",
    "                    rensho = (-p_df.iloc[0]['差2'] -p_df.iloc[1]['差2'] -p_df.iloc[2]['差2'] -p_df.iloc[3]['差2']) / 4\n",
    "                    if rensho < -0.7:\n",
    "                        e = 1.35\n",
    "                    elif -0.7 <= rensho < -0.5:\n",
    "                        e = 1.30    \n",
    "                    elif -0.5 <= rensho < -0.3:\n",
    "                        e = 1.25\n",
    "                    else:\n",
    "                        e = 1.20                \n",
    "                elif p_df.iloc[0]['着順2'] == 1 and p_df.iloc[1]['着順2'] == 1 and p_df.iloc[2]['着順2'] == 1:\n",
    "                    rensho = (-p_df.iloc[0]['差2'] -p_df.iloc[1]['差2'] -p_df.iloc[2]['差2'] +p_df.iloc[3]['差2']) / 4    \n",
    "\n",
    "                    if rensho < -0.7:\n",
    "                        e = 1.25\n",
    "                    elif -0.7 <= rensho < -0.5:\n",
    "                        e = 1.20    \n",
    "                    elif -0.5 <= rensho < -0.3:\n",
    "                        e = 1.15\n",
    "                    else:\n",
    "                        e = 1.10\n",
    "\n",
    "                elif p_df.iloc[0]['着順2'] == 1 and p_df.iloc[1]['着順2']:\n",
    "                    rensho = (-p_df.iloc[0]['差2'] -p_df.iloc[1]['差2'] +p_df.iloc[2]['差2'] +p_df.iloc[3]['差2']) / 4    \n",
    "\n",
    "                    if rensho < -0.7:\n",
    "                        e = 1.20\n",
    "                    elif -0.7 <= rensho < -0.5:\n",
    "                        e = 1.15    \n",
    "                    elif -0.5 <= rensho < -0.3:\n",
    "                        e = 1.10\n",
    "                    else:\n",
    "                        e = 1.05\n",
    "                                                                        \n",
    "                else:\n",
    "                    e = 1.0\n",
    "\n",
    "                        \n",
    "                #斤量補正        \n",
    "                if 800 <= race_distance <= 1000:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.15 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.15 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif 1000 < race_distance <= 1400:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.1166 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.1166 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif 1400 < race_distance <= 1800:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.0833 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.0833 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "                elif race_distance > 1800:\n",
    "                    if '牝' in horse_id:\n",
    "                        f = kijun1 * 0.05 * ((float(max(weight_list))) - 2.0 - float(horse_id[10:15].strip()))\n",
    "                    else:\n",
    "                        f = kijun1 * 0.05 * ((float(max(weight_list))) - float(horse_id[10:15].strip()))\n",
    "\n",
    "\n",
    "                #休養係数        \n",
    "                #if td(weeks = 12) < (racedate - p_df.iloc[0]['日付2']) <= td(weeks = 24):\n",
    "                    #g = 0.95\n",
    "                #elif td(weeks = 24) < (racedate - p_df.iloc[0]['日付2']) <= td(weeks = 48):\n",
    "                    #g = 0.9\n",
    "                if td(weeks = 8) < (racedate - p_df.iloc[0]['日付2']):\n",
    "                    g = 0.8\n",
    "                else:\n",
    "                    g = 1.0\n",
    "\n",
    "\n",
    "                #レース毎の牝馬補正 \n",
    "                hinba = []\n",
    "                for v in range(4):\n",
    "\n",
    "                    if '牝' in p_df.iloc[v]['レース名2']:\n",
    "                        female = 0.9\n",
    "                    else:\n",
    "                        female = 1.0\n",
    "\n",
    "                    hinba.append(female)\n",
    "\n",
    "                a1, b1, c1, d1 = hinba[0], hinba[1], hinba[2], hinba[3] \n",
    "\n",
    "                \n",
    "                #距離係数                \n",
    "                av_dist = (p_df.iloc[0]['距離2'] + p_df.iloc[1]['距離2'] + p_df.iloc[2]['距離2'] + p_df.iloc[3]['距離2']) / 4 \n",
    "                if 800 <= race_distance <= 1000:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 200 and abs(race_distance - av_dist) > 200:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1000 < race_distance <= 1400:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 250 and abs(race_distance - av_dist) > 250:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1400 < race_distance <= 1800:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 300 and abs(race_distance - av_dist) > 300:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "                elif 1800 < race_distance:\n",
    "                    if abs(race_distance - p_df.iloc[0]['距離2']) > 400 and av_dist < 1600:\n",
    "                        h = 0.9\n",
    "                    else:\n",
    "                        h = 1.0\n",
    "\n",
    "   \n",
    "                #コース係数\n",
    "                if race_course == 'ダ':\n",
    "                    if 'Ｊ' in p_df.iloc[0]['競馬場']:\n",
    "                        if p_df.iloc[0]['コース'] == '芝' and p_df.iloc[1]['コース'] == '芝':\n",
    "                            i = 0.5\n",
    "                        elif p_df.iloc[0]['コース'] == '芝' and p_df.iloc[1]['コース'] == 'ダ':\n",
    "                            i = 0.6\n",
    "                        elif p_df.iloc[0]['コース'] == 'ダ' and p_df.iloc[1]['コース'] == '芝':\n",
    "                            i = 0.7\n",
    "                        elif p_df.iloc[0]['コース'] == 'ダ':\n",
    "                            i = 0.8                       \n",
    "                    else:\n",
    "                        i = 1.0\n",
    "\n",
    "\n",
    "                ts = ((kijun1 *1.3 *a *a1 + kijun2 *1.2 *b *b1 + kijun3 *1.1 *c *c1 + kijun4 *1.0 *d *d1 ) + f) * e * g * h * i\n",
    "                tekito_shisu[horse_id]= int(ts)\n",
    "\n",
    "        return tekito_shisu\n",
    "\n",
    "\n",
    "\n",
    "    kekka = shisu(processed_horse_results)\n",
    "    hyo = pd.DataFrame({'馬番': umaban, '馬名': horse_name_list})\n",
    "    hyo1 = copy.deepcopy(hyo)\n",
    "    hyo1['指数'] = kekka.values()\n",
    "    hyo1['賞金'] = horse_syokin_list\n",
    "    hyo1['騎手'] = jockey_list\n",
    "    hyo1['調教師'] = trainer_list\n",
    "    hyo1['年齢'] = age_list\n",
    "    hyo1['斤量'] = weight_list\n",
    "    hyo1['斤量'] = hyo1['斤量'].astype(float)\n",
    "    hyo1['オッズ'] = odds_list\n",
    "    hyo1['前走'] = zenso_list\n",
    "    \n",
    "    \n",
    "    past_weight_list = []\n",
    "    for xxx, kr in horse_results.items():\n",
    "        kkr = (kr['負担重量'][0])\n",
    "        past_weight_list.append(kkr)\n",
    "    s = pd.Series(past_weight_list)\n",
    "    hyo1['斤量増減']= hyo1['斤量'] - s\n",
    "\n",
    "    \n",
    "#騎手補正：連帯率40以上:1.2, 35-40%:1.15, 30-35%:1.1, 25-30%:1.05 \n",
    "    hyo1.loc[hyo1['騎手'] == '御神訓', '指数'] = round(hyo1['指数'] * 1.05)\n",
    "    hyo1.loc[hyo1['騎手'] == '真島大', '指数'] = round(hyo1['指数'] * 1.10)\n",
    "    hyo1.loc[hyo1['騎手'] == '矢野貴', '指数'] = round(hyo1['指数'] * 1.10)\n",
    "    hyo1.loc[hyo1['騎手'] == '笹川翼', '指数'] = round(hyo1['指数'] * 1.10)\n",
    "    hyo1.loc[hyo1['騎手'] == '左海誠', '指数'] = round(hyo1['指数'] * 1.00)\n",
    "    hyo1.loc[hyo1['騎手'] == '本田重', '指数'] = round(hyo1['指数'] * 1.00)\n",
    "    hyo1.loc[hyo1['騎手'] == '山崎誠', '指数'] = round(hyo1['指数'] * 1.05)\n",
    "    hyo1.loc[hyo1['騎手'] == '吉原寛', '指数'] = round(hyo1['指数'] * 1.05)\n",
    "    \n",
    "    #前走からの斤量増減補正\n",
    "    \n",
    "    hyo1.loc[hyo1['斤量増減'] == -6.0, '指数'] = round(hyo1['指数'] * 1.20)   \n",
    "    hyo1.loc[hyo1['斤量増減'] == -5.5, '指数'] = round(hyo1['指数'] * 1.18)   \n",
    "    hyo1.loc[hyo1['斤量増減'] == -5.0, '指数'] = round(hyo1['指数'] * 1.16)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -4.5, '指数'] = round(hyo1['指数'] * 1.14)   \n",
    "    hyo1.loc[hyo1['斤量増減'] == -4.0, '指数'] = round(hyo1['指数'] * 1.12)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -3.5, '指数'] = round(hyo1['指数'] * 1.10)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -3.0, '指数'] = round(hyo1['指数'] * 1.08)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -2.5, '指数'] = round(hyo1['指数'] * 1.06)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -2.0, '指数'] = round(hyo1['指数'] * 1.04)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -1.5, '指数'] = round(hyo1['指数'] * 1.02)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -1.0, '指数'] = round(hyo1['指数'] * 1.0)\n",
    "    hyo1.loc[hyo1['斤量増減'] == -0.5, '指数'] = round(hyo1['指数'] * 1.0)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 0.0, '指数'] = round(hyo1['指数'] * 1.0)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 0.5, '指数'] = round(hyo1['指数'] * 1.0)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 1.0, '指数'] = round(hyo1['指数'] * 1.0)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 1.5, '指数'] = round(hyo1['指数'] * 0.98)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 2.0, '指数'] = round(hyo1['指数'] * 0.96)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 2.5, '指数'] = round(hyo1['指数'] * 0.94)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 3.0, '指数'] = round(hyo1['指数'] * 0.92)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 3.5, '指数'] = round(hyo1['指数'] * 0.90)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 4.0, '指数'] = round(hyo1['指数'] * 0.88)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 4.5, '指数'] = round(hyo1['指数'] * 0.86)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 5.0, '指数'] = round(hyo1['指数'] * 0.84)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 5.5, '指数'] = round(hyo1['指数'] * 0.82)\n",
    "    hyo1.loc[hyo1['斤量増減'] == 6.0, '指数'] = round(hyo1['指数'] * 0.80)\n",
    "    \n",
    "    hyo1['指数'] = hyo1['指数'].astype('int64')\n",
    "    hyo1['年齢'] = hyo1['年齢'].astype(int)\n",
    "    hyo1['順位'] = hyo1['指数'].rank(ascending=False).astype(int)\n",
    "\n",
    "    #出走馬のクラスを算出\n",
    "\n",
    "#現在のクラスを判定\n",
    "    cl_list = []\n",
    "    for i in range(len(hyo1)):\n",
    "        if racedate <= dt(kotoshi, 6, 30):\n",
    "    \n",
    "            if hyo1.iloc[i]['年齢'] == 3:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    present_cl = \"ND\"\n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2800:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"                        \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 4:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 200:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 200 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1600:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 1600 <= hyo1.iloc[i]['賞金'] < 2100:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2100 <= hyo1.iloc[i]['賞金'] < 3400:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 5:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 400:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 400 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1900:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 1900 <= hyo1.iloc[i]['賞金'] < 2500:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2500 <= hyo1.iloc[i]['賞金'] < 4300:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 6:\n",
    "                if 160 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3200:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 3200 <= hyo1.iloc[i]['賞金'] < 5000:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"             \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 7:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1600:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1600 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2700:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 2700 <= hyo1.iloc[i]['賞金'] < 3700:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 3700 <= hyo1.iloc[i]['賞金'] < 5500:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] >= 8:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 3000 <= hyo1.iloc[i]['賞金'] < 4100:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 4100 <= hyo1.iloc[i]['賞金'] < 5900:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"         \n",
    "    \n",
    "            cl_list.append(present_cl)\n",
    "    \n",
    "    \n",
    "        if racedate >= dt(kotoshi, 7, 1):\n",
    "            if hyo1.iloc[i]['年齢'] == 3:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 200:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 200 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 4:\n",
    "                if 20 <= hyo1.iloc[i]['賞金'] < 300:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 300 <= hyo1.iloc[i]['賞金'] < 600:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 600 <= hyo1.iloc[i]['賞金'] < 900:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 900 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2300:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2300 <= hyo1.iloc[i]['賞金'] < 3600:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 5:\n",
    "                if 80 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2600:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 2600 <= hyo1.iloc[i]['賞金'] < 4400:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 6:\n",
    "                if 160 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2500:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 2500 <= hyo1.iloc[i]['賞金'] < 3400:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 3400 <= hyo1.iloc[i]['賞金'] < 5200:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"             \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 7:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2100:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 2100 <= hyo1.iloc[i]['賞金'] < 2900:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 2900 <= hyo1.iloc[i]['賞金'] < 3900:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 3900 <= hyo1.iloc[i]['賞金'] < 5700:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] >= 8:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    present_cl = \"C3\"\n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    present_cl = \"C2\"\n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    present_cl = \"C1\"\n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    present_cl = \"B3\"\n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    present_cl = \"B2\"\n",
    "                elif 3000 <= hyo1.iloc[i]['賞金'] < 4100:\n",
    "                    present_cl = \"B1\"\n",
    "                elif 4100 <= hyo1.iloc[i]['賞金'] < 5900:\n",
    "                    present_cl = \"A2\"\n",
    "                else:\n",
    "                    present_cl = \"A1\"\n",
    "    \n",
    "            cl_list.append(present_cl)\n",
    "    \n",
    "    hyo1[\"クラス\"] = cl_list\n",
    "    \n",
    "    \n",
    "    \n",
    "    \n",
    "    \n",
    "    \n",
    "    #出走馬の昇級しない着順を算出\n",
    "    \n",
    "    ok_list = []\n",
    "    for i in range(len(hyo1)):\n",
    "        if racedate <= dt(kotoshi, 6, 30):\n",
    "    \n",
    "            if hyo1.iloc[i]['年齢'] == 3:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"   \n",
    "    \n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "              \n",
    "    \n",
    "            if hyo1.iloc[i]['年齢'] == 4:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                 \n",
    "    \n",
    "                elif 200 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1600:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1600:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1600:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1600:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 1600 <= hyo1.iloc[i]['賞金'] < 2100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2100 <= hyo1.iloc[i]['賞金'] < 3400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 5:\n",
    "                if 80 <= hyo1.iloc[i]['賞金'] < 400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                    \n",
    "    \n",
    "                elif 400 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 1900 <= hyo1.iloc[i]['賞金'] < 2500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2500 <= hyo1.iloc[i]['賞金'] < 4300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 4300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 4300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 4300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 4300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 4300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 6:\n",
    "                if 160 <= hyo1.iloc[i]['賞金'] < 700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                    \n",
    "    \n",
    "                elif 700 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 3200 <= hyo1.iloc[i]['賞金'] < 5000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 7:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                    \n",
    "    \n",
    "                elif 1000 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1600:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1600:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1600:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1600:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1600 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 2700 <= hyo1.iloc[i]['賞金'] < 3700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 3700 <= hyo1.iloc[i]['賞金'] < 5500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] >= 8:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 3000 <= hyo1.iloc[i]['賞金'] < 4100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 4100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 4100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 4100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 4100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 4100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 4100 <= hyo1.iloc[i]['賞金'] < 5900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\" \n",
    "    \n",
    "            ok_list.append(ok)\n",
    "    \n",
    "    \n",
    "        if racedate >= dt(kotoshi, 7, 1):\n",
    "            if hyo1.iloc[i]['年齢'] == 3:\n",
    "                if 0 <= hyo1.iloc[i]['賞金'] < 200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 200 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 4:\n",
    "                if 20 <= hyo1.iloc[i]['賞金'] < 300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"   \n",
    "    \n",
    "                elif 300 <= hyo1.iloc[i]['賞金'] < 600:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 600:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 600:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 600:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 600 <= hyo1.iloc[i]['賞金'] < 900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 900 <= hyo1.iloc[i]['賞金'] < 1300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1300 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2300:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2300:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2300:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2300:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2300:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2300:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2300 <= hyo1.iloc[i]['賞金'] < 3600:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3600:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3600:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3600:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 5:\n",
    "                if 80 <= hyo1.iloc[i]['賞金'] < 500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                   \n",
    "    \n",
    "                elif 500 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "                        \n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "                        \n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "                        \n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 2000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 2000 <= hyo1.iloc[i]['賞金'] < 2600:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2600:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2600:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2600:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2600:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2600:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "                        \n",
    "                elif 2700 <= hyo1.iloc[i]['賞金'] < 4400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 4400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 4400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 4400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 4400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 4400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 6:\n",
    "                if 160 <= hyo1.iloc[i]['賞金'] < 800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                   \n",
    "    \n",
    "                elif 800 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 2500 <= hyo1.iloc[i]['賞金'] < 3400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 3400 <= hyo1.iloc[i]['賞金'] < 5200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"         \n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] == 7:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                     \n",
    "    \n",
    "                elif 1100 <= hyo1.iloc[i]['賞金'] < 1400:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1400:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1400:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1400:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1400:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1400:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "                elif 1400 <= hyo1.iloc[i]['賞金'] < 1700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 1700 <= hyo1.iloc[i]['賞金'] < 2100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2100 <= hyo1.iloc[i]['賞金'] < 2900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 2900 <= hyo1.iloc[i]['賞金'] < 3900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 3900 <= hyo1.iloc[i]['賞金'] < 5700:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5700:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5700:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5700:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5700:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5700:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\"\n",
    "    \n",
    "            elif hyo1.iloc[i]['年齢'] >= 8:\n",
    "                if 240 <= hyo1.iloc[i]['賞金'] < 1200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"                \n",
    "    \n",
    "                elif 1200 <= hyo1.iloc[i]['賞金'] < 1500:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1500:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1500:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1500:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1500:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1500:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"    \n",
    "    \n",
    "                elif 1500 <= hyo1.iloc[i]['賞金'] < 1800:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 1800:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 1800:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 1800:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 1800:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 1800:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "                elif 1800 <= hyo1.iloc[i]['賞金'] < 2200:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 2200:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 2200:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 2200:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 2200:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 2200:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "    \n",
    "                elif 2200 <= hyo1.iloc[i]['賞金'] < 3000:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 3000:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 3000:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 3000:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 3000:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 3000:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "    \n",
    "                elif 3000 <= hyo1.iloc[i]['賞金'] < 4100:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 4100:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 4100:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 4100:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 4100:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 4100:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\"\n",
    "                        \n",
    "                elif 4100 <= hyo1.iloc[i]['賞金'] < 5900:\n",
    "                    if hyo1.iloc[i]['賞金'] + race_syokin[4] >= 5900:\n",
    "                        ok = \"5着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[3] >= 5900:\n",
    "                        ok = \"4着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[2] >= 5900:\n",
    "                        ok = \"3着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[1] >= 5900:\n",
    "                        ok = \"2着で昇級\"\n",
    "                    elif hyo1.iloc[i]['賞金'] + race_syokin[0] >= 5900:\n",
    "                        ok = \"1着で昇級\"\n",
    "                    else:\n",
    "                        ok = \"1着でも現級\" \n",
    "                else:\n",
    "                    ok = \"稼ぎ放題\" \n",
    "                    \n",
    "            ok_list.append(ok)\n",
    "\n",
    "#偏差値計算    \n",
    "    final_shisu = hyo1['指数'].to_list()\n",
    "    ave = np.average(final_shisu)\n",
    "    std = np.std(final_shisu)\n",
    "\n",
    "    deviation = []\n",
    "    for i in final_shisu:\n",
    "      deviation_value = '{:.1f}'.format(float((i - ave) / std * 10 + 50), 1)\n",
    "      deviation.append(deviation_value)\n",
    "\n",
    "    hyo1['偏差値'] = deviation\n",
    "              \n",
    "                \n",
    "    hyo1[\"許容着順\"] = ok_list\n",
    "    hyo2 = hyo1[['順位', '馬番','馬名', '指数', '偏差値', '騎手', '調教師', 'クラス', '許容着順', '年齢', 'オッズ', '前走']]\n",
    "    hyo3 = hyo2.sort_values('順位')\n",
    "    hyo3.set_index(\"順位\", inplace=True)\n",
    "\n",
    "    st.write('【' + racenumber + '】' +  racename)\n",
    "    st.table(hyo3)\n",
    "    \n",
    "else:\n",
    "    st.write(\"・・・・・・・\")\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
